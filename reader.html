<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Reader</title>
<style>
body { margin:0; background:black; }
img { display:block; width:100vw; }
</style>
</head>
<body>

<div id="comic-container"></div>

<script>
(async function() {
  const params = new URLSearchParams(window.location.search);
  const comicKey = params.get("comic");
  const chapter = params.get("chapter");

  if (!comicKey || !chapter) {
    document.getElementById("comic-container").innerHTML =
      "<p style='color:white; text-align:center; padding:50px;'>Brak parametru comic lub chapter.</p>";
    return;
  }

  try {
    const res = await fetch(comicKey + ".json");
    const data = await res.json();

    const pages = data.chapters?.[chapter];

    if (!pages || pages.length === 0) {
      document.getElementById("comic-container").innerHTML =
        "<p style='color:white; text-align:center; padding:50px;'>Brak obrazków dla tego rozdziału.</p>";
      return;
    }

    const container = document.getElementById("comic-container");
    pages.forEach(src => {
      const img = document.createElement("img");
      img.src = src;
      container.appendChild(img);
    });

  } catch (e) {
    document.getElementById("comic-container").innerHTML =
      "<p style='color:white; text-align:center; padding:50px;'>Błąd wczytywania pliku JSON.</p>";
  }
})();
</script>

</body>
</html>
